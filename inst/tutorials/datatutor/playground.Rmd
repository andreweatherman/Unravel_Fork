---
title: "Data Tutor Playground"
# output:
#   learnr::tutorial:
#     html_document:
#       includes:
#         in_header: header.html
output: learnr::tutorial
    # progressive: true
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(knitr)
library(shiny)
library(learnr)
# library(sketch)
# library(daff)
# library(here)
library(htmlwidgets)
library(DiagrammeR)
library(xfun)

# links to check out for custom engine:
# https://github.com/r-lib/asciicast/blob/03667c031f4e6f0ad716cf4ec55eb1395d8f5344/R/knitr.R#L100
# https://github.com/carpentries/dovetail/blob/master/R/engine.R

# install knitr hooks
source(here::here("R", "knitr-hooks.R"))
install_knitr_hooks()
# webapps dir
get_webapp <- function(name) here::here("shinyapps", paste0(name, ".Rmd"))
knitr::opts_chunk$set(echo = FALSE)
```

# Interactive elements in learnr

## Data structure custom chunk

```{dsviz pylistbasic}
[1, 2, 3]
```

```{dsviz pylistcomplex}
[[1, 2, 3], [4, 5, 6]] * 3
```

```{dsviz pydict}
{'a': [1,2,3]}
```

```{dsviz pydataframe}
pd.DataFrame({'a':[1,2,3], 'b':[4,5,6]})
```

## Embeding `html_widget`

<!-- ## What does a pandas.DataFrame look like structurally? -->

This is an example of a Shiny app that visualizes Python data structures. Try entering "[1, 2, 3]" below:

```{r, child=get_webapp("lolviz")}

```


<!-- ## Custom div elements -->

<!-- The hint message below is an embedded div element which has custom css associated with it. -->

<!-- <div id="help-hint"> -->
<!-- **Hint:** Type `?mpg` and then click the Submit Answer button. -->
<!-- </div> -->

<!-- This is a simple example but you could expand on this for custom-styled boxes, text, and other elements. -->

<!-- --- -->

## Data Diffing Tools

Diffing objects seems to be of general interest for data scientists. Data diffs tackles the data bit, and it can be nice to show when it's hard to tell the differences btw two tables.

One tool we can reuse is [`daff`](https://github.com/edwindj/daff), which visualizes data diffs.

<!-- ```{r echo=TRUE, context="server"} -->
<!-- y <- mtcars[1:3, ] -->
<!-- x <- y -->

<!-- x <- head(x, 2) # remove a row -->
<!-- x[1, 1] <- 10 # change a value -->
<!-- x$hello <- "world"  # add a column -->
<!-- x$dist <- NULL # remove a column -->

<!-- patch <- diff_data(y, x) -->
<!-- # can write patch to csv -->
<!-- write_diff(patch, "patch.csv") -->
<!-- # or render a html file (which can then be embedded in rmd) -->
<!-- render_diff(patch, file="./diff.html", view = FALSE) -->
<!-- ``` -->

<!-- `{daff}` is simple and has good diff semantics we can use to generate our own fancy table viz (for e.g. with [`{gt}`](https://gt.rstudio.com)) -->

<!-- --- -->

<!-- ## Data Validation tools -->

<!-- We could also use data validation tools with packages like `{pointblank}` with `{gt}` to validate various aspects about our data (such as column names/values, dimensions, etc.) and produce a prettier viz: -->

<!-- <img src="https://github.com/rich-iannone/pointblank/raw/master/man/figures/agent_report.png" width=95%> -->

<!-- This would be interactive when we embed it in the document. -->

<!-- --- -->

<!-- # Interactive Learning Viz/Tools -->

<!-- ## Visualizing data transformation -->

<!-- From `{tidyexplain}`, a repo full of these animations: -->

<!-- ## Mutating Joins -->

<!-- > A mutating join allows you to combine variables from two tables. It -->
<!-- > first matches observations by their keys, then copies across variables -->
<!-- > from one table to the other.   -->
<!-- > [R for Data Science: Mutating -->
<!-- > joins](http://r4ds.had.co.nz/relational-data.html#mutating-joins) -->

<!-- <img src="https://github.com/nischalshrestha/tidyexplain/blob/master/images/static/png/original-dfs.png?raw=true" width="480px" /> -->

<!-- ``` r -->
<!-- x -->
<!-- #> # A tibble: 3 x 2 -->
<!-- #>      id x     -->
<!-- #>   <int> <chr> -->
<!-- #> 1     1 x1    -->
<!-- #> 2     2 x2    -->
<!-- #> 3     3 x3 -->
<!-- y -->
<!-- #> # A tibble: 3 x 2 -->
<!-- #>      id y     -->
<!-- #>   <int> <chr> -->
<!-- #> 1     1 y1    -->
<!-- #> 2     2 y2    -->
<!-- #> 3     4 y4 -->
<!-- ``` -->

<!-- ### Inner Join -->

<!-- > All rows from `x` where there are matching values in `y`, and all -->
<!-- > columns from `x` and `y`. -->

<!-- ![](https://github.com/nischalshrestha/tidyexplain/blob/master/images/inner-join.gif?raw=true) -->

<!-- ``` r -->
<!-- inner_join(x, y, by = "id") -->
<!-- #> # A tibble: 2 x 3 -->
<!-- #>      id x     y     -->
<!-- #>   <int> <chr> <chr> -->
<!-- #> 1     1 x1    y1    -->
<!-- #> 2     2 x2    y2 -->
<!-- ``` -->

<!-- **Shiny apps for exploring data or concepts** -->

<!-- This is an example of embedded an interactive web app (using R's web framework Shiny) that has a slider input and histograph plot as output that changes in response. -->

<!-- This would be a good learning tool if you need to play with concepts like histograms and other stats/datascience concepts: -->

<!-- ```{r, echo=FALSE} -->
<!-- sliderInput("bins", "Number of bins:", min = 1, max = 50, value = 30) -->
<!-- plotOutput("distPlot") -->
<!-- ``` -->

<!-- ```{r, context="server", echo=FALSE} -->
<!-- output$distPlot <- renderPlot({ -->
<!--   x <- faithful[, 2]  # Old Faithful Geyser data -->
<!--   bins <- seq(min(x), max(x), length.out = input$bins + 1) -->
<!--   hist(x, breaks = bins, col = 'darkgray', border = 'white') -->
<!-- }) -->
<!-- ``` -->

<!-- --- -->

<!-- **Other web apps (p5.js)** -->

<!-- This is an example of embedding a custom visualization tool (p5.js). This requires making an R wrapper package/functions to generate appropriate html/js for the library to process and render final html. -->

<!-- This is a demo of a R wrapper package called [`{sketchr}`](https://github.com/kcf-jackson/sketch), which transpiles to html/js and uses the p5.js to render output properly. -->

<!-- ```{r, results="asis",echo=FALSE} -->
<!-- sketch::insert_sketch( -->
<!--   file = "main.R", id = "sketch_1", -->
<!--   width = 800, height = 600 -->
<!-- ) -->
<!-- ``` -->


<!-- TODO: embed lolviz -->


<!-- ## Embed remotely hosted learnr exercise -->

<!-- The exercise below is a deployed learnr exercise on shinyapps.io and is included as an iframe on this document. It  uses an html header so that it can be resized properly on popover (hint/solution). -->

<!-- <iframe class="interactive" id="myIframe1" src="https://nshrest.shinyapps.io/learnr_app1/" scrolling="no" frameborder="no" width=100%></iframe> -->

<!-- <script> -->
<!--   iFrameResize({}, ".interactive"); -->
<!-- </script> -->