---
pagetitle: tidy_parsons
example:
  title: tidy_parsons
  runtime: repl
  mode:
    document: html
  initial:
    js: |
      /* console.log(document.getElementsByClassName('data')[0]); */

      var data = CodeMirror.fromTextArea(document.getElementsByClassName('data')[0], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['data_line']
      });
      data.setSize(null, 30); // this done so that width is auto but we manually set height on a tidyverse line


      var verb1 = CodeMirror.fromTextArea(document.getElementsByClassName('verb')[0], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['verb1_line'],
        firstLineNumber: 2
      });
      verb1.setSize(null, 30);

      var verb2 = CodeMirror.fromTextArea(document.getElementsByClassName('verb')[1], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['verb2_line'],
        firstLineNumber: 3
      });
      verb2.setSize(null, 30);

      var verb3 = CodeMirror.fromTextArea(document.getElementsByClassName('verb')[2], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['verb2_line'],
        firstLineNumber: 3
      });
      verb3.setSize(null, 30);

      var verb4 = CodeMirror.fromTextArea(document.getElementsByClassName('verb')[3], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['verb2_line'],
        firstLineNumber: 3
      });
      verb4.setSize(null, 30);

      function makeMarker() {
        const marker = document.createElement('span');
        marker.className = 'glyphicon glyphicon-move';
        marker.style.paddingLeft = '2px'
        marker.style.paddingRight = '0px'
        marker.style.color = 'grey';
        marker.style.cursor = 'move';
        marker.style.fontSize = '0.8em';
        marker.style.color = '#2c3745';
        marker.style.cursor = '-webkit-grabbing';
        marker.style.float = 'left'
        return marker;
      }

      /* doc = data.getDoc()
      lh = doc.getLineHandle(0);
      doc.setGutterMarker(lh, 'data_line', makeMarker()); */

      /* doc = verb1.getDoc()
      lh = doc.getLineHandle(0);
      doc.setGutterMarker(lh, 'verb1_line', makeMarker()); */

      /* doc = verb2.getDoc()
      lh = doc.getLineHandle(0);
      doc.setGutterMarker(lh, 'verb2_line', makeMarker());  */

      Sortable.create(simpleList, {
        /* options */
      });
    css: " \n.glyphicon-move {\n  font-size: 1em;\n  color: #2c3745;\n  cursor: -webkit-grabbing;\n
      \ margin-top: 0.5em;\n} \n\n.list-group-item {\n  border: 1px solid #eee;\n
      \ padding: 0px;\n  margin: 0px;\n  display: flex;\n  align-items: center;\n}\n\n.container
      {\n  display: flex;\n  /* align-items: center; */\n  justify-content: right;\n
      \ width: 100%;\n}\n\n.CodeMirror {\n  border: 1px solid #eee;\n  /* height:
      auto; */\n  margin: 0px;\n  padding: 0px;\n  width: 96%;\n  float: right;\n}\n\n.summary
      {\n  padding: 1em;\n}\n\n.fast .toggle-group { transition: left 0.2s; -webkit-transition:
      left 0.1s; }\n\n.toggle.ios, .toggle-on.ios, .toggle-off.ios { \n  height: 2px;\n
      \ margin: 0.2em; \n  padding: 0.1em; \n  border-radius: 10rem; \n}\n\n.toggle.ios
      .toggle-handle { \n  padding-bottom: 0em;\n  border-radius: 10rem; \n}\n"
  solution:
    js: |
      /* console.log(document.getElementsByClassName('data')[0]); */

      var data = CodeMirror.fromTextArea(document.getElementsByClassName('data')[0], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['data_line']
      });
      data.setSize(null, 30); // this done so that width is auto but we manually set height on a tidyverse line


      var verb1 = CodeMirror.fromTextArea(document.getElementsByClassName('verb')[0], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['verb1_line'],
        firstLineNumber: 2
      });
      verb1.setSize(null, 30);

      var verb2 = CodeMirror.fromTextArea(document.getElementsByClassName('verb')[1], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['verb2_line'],
        firstLineNumber: 3
      });
      verb2.setSize(null, 30);

      var verb3 = CodeMirror.fromTextArea(document.getElementsByClassName('verb')[2], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['verb2_line'],
        firstLineNumber: 3
      });
      verb3.setSize(null, 30);

      var verb4 = CodeMirror.fromTextArea(document.getElementsByClassName('verb')[3], {
        mode: 'r',
        readOnly: 'nocursor',
        styleActiveLine: false,
        lineNumbers: false,
        gutters: ['verb2_line'],
        firstLineNumber: 3
      });
      verb4.setSize(null, 30);

      function makeMarker() {
        const marker = document.createElement('span');
        marker.className = 'glyphicon glyphicon-move';
        marker.style.paddingLeft = '2px'
        marker.style.paddingRight = '0px'
        marker.style.color = 'grey';
        marker.style.cursor = 'move';
        marker.style.fontSize = '0.8em';
        marker.style.color = '#2c3745';
        marker.style.cursor = '-webkit-grabbing';
        marker.style.float = 'left'
        return marker;
      }

      /* doc = data.getDoc()
      lh = doc.getLineHandle(0);
      doc.setGutterMarker(lh, 'data_line', makeMarker()); */

      /* doc = verb1.getDoc()
      lh = doc.getLineHandle(0);
      doc.setGutterMarker(lh, 'verb1_line', makeMarker()); */

      /* doc = verb2.getDoc()
      lh = doc.getLineHandle(0);
      doc.setGutterMarker(lh, 'verb2_line', makeMarker());  */

      Sortable.create(simpleList, {
        /* options */
      });
    css: " \n.glyphicon-move {\n  font-size: 1em;\n  color: #2c3745;\n  cursor: -webkit-grabbing;\n
      \ margin-top: 0.5em;\n} \n\n.list-group-item {\n  border: 1px solid #eee;\n
      \ padding: 0px;\n  margin: 0px;\n  display: flex;\n  align-items: center;\n}\n\n.container
      {\n  display: flex;\n  /* align-items: center; */\n  justify-content: right;\n
      \ width: 100%;\n}\n\n.CodeMirror {\n  border: 1px solid #eee;\n  /* height:
      auto; */\n  margin: 0px;\n  padding: 0px;\n  width: 96%;\n  float: right;\n}\n\n.summary
      {\n  padding: 1em;\n}\n\n.fast .toggle-group { transition: left 0.2s; -webkit-transition:
      left 0.1s; }\n\n.toggle.ios, .toggle-on.ios, .toggle-off.ios { \n  height: 2px;\n
      \ margin: 0.2em; \n  padding: 0.1em; \n  border-radius: 10rem; \n}\n\n.toggle.ios
      .toggle-handle { \n  padding-bottom: 0em;\n  border-radius: 10rem; \n}\n"
output:
  js4shiny::html_document_js4shiny:
    css: ~
    script:
      head: https://unpkg.com/jquery@3.4.1

---
<div><!--for pandoc-->
<!DOCTYPE html>
<html>

  <head>
    <meta name="description" content="Demo of using Sortable with some items disabled.">
    <meta charset="utf-8">
    <title>JS Bin</title>
  </head>

  <body>

    <!-- Latest compiled and minified CSS:-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <!-- Toggle switch library for boostrap 4 -->
    <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>

    <!--  Idk why but a combo of bootstrap 4 and 6 is nice looking; try sticking to one -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" />

    <!-- CodeMirror -->
    <script src="https://codemirror.net/lib/codemirror.js"></script>
    <link rel="stylesheet" href="https://codemirror.net/lib/codemirror.css" />
    <script src="https://codemirror.net/mode/r/r.js"></script>

    <!-- Latest Sortable -->
    <script src="https://raw.githack.com/SortableJS/Sortable/master/Sortable.js"></script>

    <!-- fontawesome! -->
    <link rel="stylesheet" , href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" />


    <p class="summary">Here we take the <code>babynames</code> dataframe, and use <code>group_by</code> to group the data into year and sex. Then, we count the total names for each year and sex group, and create a new column <code>total</code>. Next, it's useful to reshape the data by the <code>sex</code> column such that we end up with <strong>M</strong> and <strong>F</strong> columns. This sets us up to compute a ratio of males to females for the last step.</p>
    <br>

    <!-- <div class = "container"> -->
    <div id="simpleList" class="list-group">
      <div class="list-group-item disabled">
        <textarea class="data ">babynames %>%</textarea>
      </div>
      <div class="list-group-item">
        <div class="row">
          <div class="col-sm">
            <span class="glyphicon glyphicon-move" aria-hidden="true"></span>
            <textarea class="verb">&nbsp;&nbsp;&nbsp;&nbsp;group_by(year, sex) %>%</textarea>
          </div>
          <div class="col-xs">
            <input type="checkbox" checked data-toggle="toggle" data-size="s" data-width="20" data-on=" " data-off=" " data-style="ios fast" data-onstyle="success" data-offstyle="secondary">
          </div>
        </div>
      </div>
      <div class="list-group-item">
        <div class="row">
          <div class="col-sm">
            <span class="glyphicon glyphicon-move" aria-hidden="true"></span>
            <textarea class="verb">&nbsp;&nbsp;&nbsp;&nbsp;summarise(total = sum(n)) %>%</textarea>
          </div>
          <div class="col-xs">
            <input type="checkbox" checked data-toggle="toggle" data-size="s" data-width="20" data-on=" " data-off=" " data-style="ios fast" data-onstyle="success" data-offstyle="secondary">
          </div>
        </div>
      </div>
      <div class="list-group-item">
        <div class="row">
          <div class="col-sm">
            <span class="glyphicon glyphicon-move" aria-hidden="true"></span>
            <textarea class="verb">&nbsp;&nbsp;&nbsp;&nbsp;spread(sex, total) %>%</textarea>
          </div>
          <div class="col-xs">
            <input type="checkbox" checked data-toggle="toggle" data-size="s" data-width="20" data-on=" " data-off=" " data-style="ios fast" data-onstyle="success" data-offstyle="secondary">
          </div>
        </div>
      </div>
      <div class="list-group-item">
        <div class="row">
          <div class="col-sm">
            <span class="glyphicon glyphicon-move" aria-hidden="true"></span>
            <textarea class="verb">&nbsp;&nbsp;&nbsp;&nbsp;mutate(ratio = M / F)</textarea>
          </div>
          <div class="col-xs">
            <input type="checkbox" checked data-toggle="toggle" data-size="s" data-width="20" data-on=" " data-off=" " data-style="ios fast" data-onstyle="success" data-offstyle="secondary">
          </div>
        </div>
      </div>
    </div>

  </body>

</html>

</div><!--for pandoc-->